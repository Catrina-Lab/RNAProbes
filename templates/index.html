{% extends 'base.html' %}

{% block content %}
  <div class="hero-section">
    <h1 class="display-4">RNA Tool Suite</h1>
    <p class="lead">A collection of powerful tools for RNA analysis and design.</p>
  </div>

  <p class="text-center text-muted mb-4" id="program-select-label">Select one or more programs to begin.</p>

  <form action="/form" method="post" id="program-form">
    <div class="row">
      <div class="col-md-4 mb-4">
        <div class="card program-card" data-program="smFISH">
          <div class="card-icon"><i class="fas fa-search-plus"></i></div>
          <h5 class="card-title">smFISH</h5>
          <p class="card-text">Probe design for single-molecule fluorescence in situ hybridization (smFISH), considering secondary structures.</p>
          <input type="checkbox" name="programs" value="smFISH" class="form-check-input">
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="card program-card" data-program="TFOFinder">
          <div class="card-icon"><i class="fas fa-bullseye"></i></div>
          <h5 class="card-title">TFOFinder</h5>
          <p class="card-text">Target designer for triplex-forming oligonucleotides (TFOs) in RNA.</p>
          <input type="checkbox" name="programs" value="TFOFinder" class="form-check-input">
        </div>
      </div>
      <div class="col-md-4 mb-4">
        <div class="card program-card" data-program="PinMol">
          <div class="card-icon"><i class="fas fa-map-pin"></i></div>
          <h5 class="card-title">PinMol</h5>
          <p class="card-text">Molecular beacon designer for live-cell imaging of mRNA targets.</p>
          <input type="checkbox" name="programs" value="PinMol" class="form-check-input">
        </div>
      </div>
    </div>
    <div class="text-center mt-4">
        <button type="submit" class="btn btn-primary btn-lg proceed-btn">Proceed</button>
    </div>
  </form>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('program-form');
    const programCards = form.querySelectorAll('.program-card');
    const selectLabel = document.getElementById('program-select-label');

    programCards.forEach(card => {
      card.addEventListener('click', () => {
        const checkbox = card.querySelector('input[type="checkbox"]');
        checkbox.checked = !checkbox.checked;
        card.classList.toggle('selected', checkbox.checked);
        selectLabel.classList.remove('warning-text');
      });
    });

    form.addEventListener('submit', e => {
      const selectedPrograms = form.querySelectorAll('input[type="checkbox"]:checked');
      if (selectedPrograms.length === 0) {
        e.preventDefault();
        selectLabel.classList.add('warning-text');
      }
    });
  });
</script>
{% endblock %}